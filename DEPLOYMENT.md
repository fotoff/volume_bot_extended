# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é Extended Bot v2

## üìã –û–±–∑–æ—Ä

**Extended Bot v2** - —ç—Ç–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã–π —Ç–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞—â–∏—Ç–æ–π –ø—Ä–∏–±—ã–ª–∏ (PnL) –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏ –æ—Ä–¥–µ—Ä–æ–≤ (TTL). –î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –±–æ—Ç–∞ –Ω–∞ Linux —Å–µ—Ä–≤–µ—Ä–µ.

## üéØ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ v2.1

### TTL –¥–ª—è SELL –æ—Ä–¥–µ—Ä–æ–≤ (30 –¥–Ω–µ–π)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ—Ä–∞–∑–º–µ—â–µ–Ω–∏–µ SELL –æ—Ä–¥–µ—Ä–æ–≤ –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ TTL
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ "–∑–∞–≤–∏—Å–∞–Ω–∏—è" –æ—Ä–¥–µ—Ä–æ–≤ –Ω–∞ –±–∏—Ä–∂–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω –ø—Ä–∏ –ø–µ—Ä–µ—Ä–∞–∑–º–µ—â–µ–Ω–∏–∏

### –£–ª—É—á—à–µ–Ω–Ω–∞—è PnL –∑–∞—â–∏—Ç–∞
- SELL –æ—Ä–¥–µ—Ä–∞ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤—ã—à–µ WAP (Weighted Average Price)
- –ó–∞—â–∏—Ç–∞ –æ—Ç —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤ –≤ —É–±—ã—Ç–æ—á–Ω–æ–π –∑–æ–Ω–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ—Ä–∞–∑–º–µ—â–µ–Ω–∏–µ
- –§—É–Ω–∫—Ü–∏—è `check_sell_ttls()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç TTL –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –±–æ—Ç–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å TTL

## üñ•Ô∏è –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **–û–°**: Ubuntu 20.04+ / CentOS 8+ / Debian 11+
- **RAM**: 2 GB
- **CPU**: 2 —è–¥—Ä–∞
- **–î–∏—Å–∫**: 10 GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- **Python**: 3.8+

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **–û–°**: Ubuntu 22.04 LTS
- **RAM**: 4 GB
- **CPU**: 4 —è–¥—Ä–∞
- **–î–∏—Å–∫**: 20 GB SSD
- **Python**: 3.9+

## üîß –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
```bash
# Ubuntu/Debian
sudo apt update && sudo apt upgrade -y

# CentOS/RHEL
sudo yum update -y
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# Ubuntu/Debian
sudo apt install -y python3 python3-pip python3-venv git curl

# CentOS/RHEL
sudo yum install -y python3 python3-pip git curl
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –±–æ—Ç–∞
```bash
sudo useradd -m -s /bin/bash botuser
sudo usermod -aG sudo botuser
sudo passwd botuser
```

## üì• –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
cd /home/botuser
git clone https://github.com/fotoff/volume_bot_extended.git
cd volume_bot_extended
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
python3 -m venv bot-env
source bot-env/bin/activate
pip install --upgrade pip
pip install -r requirements.txt
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
cp env.example .env
nano .env
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ .env —Ñ–∞–π–ª–∞:**
```env
EXTENDED_API_KEY=your_api_key_here
EXTENDED_PUBLIC_KEY=your_public_key_here
EXTENDED_STARK_PRIVATE=your_private_key_here
EXTENDED_VAULT_ID=your_vault_id_here
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### 1. –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (`config.py`)
```python
# –í–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ä—ã–Ω–∫–∏
MARKETS = ["BTC-USD", "HYPE-USD"]

# –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ BUY –æ—Ä–¥–µ—Ä–æ–≤ (5 –º–∏–Ω—É—Ç)
BUY_TTL_SECONDS = 300

# –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ SELL –æ—Ä–¥–µ—Ä–æ–≤ (30 –¥–Ω–µ–π)
SELL_TTL_SECONDS = 30 * 24 * 60 * 60

# –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è SELL
PNL_MIN_PCT = 0.0005  # +0.05% –æ—Ç WAP

# –°—Ç–æ–ø-–ª–æ—Å—Å –Ω–∞ –≤–µ—Ç–∫—É (-2%)
BRANCH_SL_PCT = -0.02
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä
```python
# –¢—Ä–∏–≥–≥–µ—Ä—ã —Ä–æ—Å—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã
BUY6_STEP_PCT = {
    "BTC-USD": 0.003,    # 0.3%
    "HYPE-USD": 0.003,   # 0.3%
}

# –£—Ä–æ–≤–Ω–∏ –ø—Ä–∏–±—ã–ª–∏ –¥–ª—è SELL –æ—Ä–¥–µ—Ä–æ–≤
SELL_STEPS_PCT = {
    "BTC-USD": [0.003, 0.006, 0.009],
    "HYPE-USD": [0.002, 0.004, 0.006],
}
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ systemd

### 1. –°–æ–∑–¥–∞–Ω–∏–µ service —Ñ–∞–π–ª–∞
```bash
sudo nano /etc/systemd/system/extended-bot-rise.service
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞:**
```ini
[Unit]
Description=Extended Bot (Rise Strategy)
After=network.target
Wants=network.target

[Service]
Type=simple
User=botuser
Group=botuser
WorkingDirectory=/home/botuser/volume_bot_extended
Environment=PATH=/home/botuser/volume_bot_extended/bot-env/bin
ExecStart=/home/botuser/volume_bot_extended/bot-env/bin/python extended-bot-v2.py
Restart=always
RestartSec=10
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
```

### 2. –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
```bash
sudo systemctl daemon-reload
sudo systemctl enable extended-bot-rise
sudo systemctl start extended-bot-rise
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
sudo systemctl status extended-bot-rise
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞
sudo systemctl status extended-bot-rise

# –ó–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞
sudo systemctl start extended-bot-rise
sudo systemctl stop extended-bot-rise
sudo systemctl restart extended-bot-rise

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo journalctl -u extended-bot-rise -f
sudo journalctl -u extended-bot-rise --since '1 hour ago'
```

### –ö–ª—é—á–µ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö
- `üéØ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —è–∫–æ—Ä—å –Ω–∞ –º–∏–Ω–∏–º—É–º` - –Ω–æ–≤—ã–π —è–∫–æ—Ä—å —Ü–µ–Ω—ã
- `üü¢ BUY —Ä–∞–∑–º–µ—â—ë–Ω` - —Ä–∞–∑–º–µ—â–µ–Ω BUY –æ—Ä–¥–µ—Ä
- `üÜï –í–µ—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∞` - —Å–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ç–∫–∞
- `üü† SELL —Ä–∞–∑–º–µ—â–µ–Ω` - —Ä–∞–∑–º–µ—â–µ–Ω SELL –æ—Ä–¥–µ—Ä —Å PnL –∑–∞—â–∏—Ç–æ–π
- `‚è∞ TTL –∏—Å—Ç–µ–∫ –¥–ª—è SELL` - –ø–µ—Ä–µ—Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –ø–æ TTL
- `‚ö†Ô∏è –ü—Ä–æ–ø—É—Å–∫–∞–µ–º SELL` - PnL –∑–∞—â–∏—Ç–∞ —Å—Ä–∞–±–æ—Ç–∞–ª–∞

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞

### 1. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
```bash
sudo systemctl stop extended-bot-rise
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
```bash
cd /home/botuser/volume_bot_extended
git pull origin main
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
```bash
source bot-env/bin/activate
pip install -r requirements.txt
```

### 4. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
sudo systemctl start extended-bot-rise
sudo systemctl status extended-bot-rise
```

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 1. –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
sudo journalctl -u extended-bot-rise --since '5 minutes ago'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
ls -la /home/botuser/volume_bot_extended/
sudo chown -R botuser:botuser /home/botuser/volume_bot_extended/
```

#### 2. –û—à–∏–±–∫–∏ API
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
sudo -u botuser cat /home/botuser/volume_bot_extended/.env

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
curl -I https://api.x10.exchange
```

#### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
free -h
ps aux | grep python

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
sudo systemctl restart extended-bot-rise
```

### –û—á–∏—Å—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```bash
# –û—á–∏—Å—Ç–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–æ—Ç–∞ (–¥–ª—è —Å–≤–µ–∂–µ–≥–æ —Å—Ç–∞—Ä—Ç–∞)
sudo -u botuser rm -f /home/botuser/volume_bot_extended/bot_state.json
sudo systemctl restart extended-bot-rise
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. Firewall
```bash
# –û—Ç–∫—Ä—ã—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã
sudo ufw allow ssh
sudo ufw enable
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
sudo apt install unattended-upgrades
sudo dpkg-reconfigure -plow unattended-upgrades
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–∞
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞
sudo journalctl -u ssh | grep "Failed password"
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- **–ß–∞—Å—Ç–æ—Ç–∞ —Ç–∏–∫–æ–≤**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `TICK_SECONDS` –≤ config.py
- **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π**: –ê–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ `BUY_QTY` –ø–æ–¥ —Ä–∞–∑–º–µ—Ä –∞–∫–∫–∞—É–Ω—Ç–∞
- **TTL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø–æ–¥ —Ä—ã–Ω–æ—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CPU –∏ –ø–∞–º—è—Ç–∏
htop
iotop

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏—Å–∫–∞
df -h
du -sh /home/botuser/volume_bot_extended/
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
```bash
# –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ
sudo systemctl status extended-bot-rise --full

# –õ–æ–≥–∏ —Å –¥–µ—Ç–∞–ª—è–º–∏
sudo journalctl -u extended-bot-rise --since '1 hour ago' --no-pager

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo -u botuser python3 -c "from config import *; print(f'Markets: {MARKETS}')"
```

### –ö–æ–Ω—Ç–∞–∫—Ç—ã
- **GitHub Issues**: [volume_bot_extended](https://github.com/fotoff/volume_bot_extended/issues)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [README.md](README.md)
- **–ñ—É—Ä–Ω–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏–π**: [CHANGELOG.md](CHANGELOG.md)

---

**‚ö†Ô∏è –í–∞–∂–Ω–æ**: –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥–µ –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.
